this.sinon=function(){var buster=function(setTimeout,B){var isNode="function"==typeof require&&"object"==typeof module,div="undefined"!=typeof document&&document.createElement("div"),F=function(){},buster={bind:function(obj,methOrProp){var method="string"==typeof methOrProp?obj[methOrProp]:methOrProp,args=Array.prototype.slice.call(arguments,2);return function(){var allArgs=args.concat(Array.prototype.slice.call(arguments));return method.apply(obj,allArgs)}},partial:function(fn){var args=[].slice.call(arguments,1);return function(){return fn.apply(this,args.concat([].slice.call(arguments)))}},create:function(object){return F.prototype=object,new F},extend:function(target){if(target){for(var prop,i=1,l=arguments.length;l>i;++i)for(prop in arguments[i])target[prop]=arguments[i][prop];return target}},nextTick:function(callback){return"undefined"!=typeof process&&process.nextTick?process.nextTick(callback):(setTimeout(callback,0),void 0)},functionName:function(func){if(!func)return"";if(func.displayName)return func.displayName;if(func.name)return func.name;var matches=func.toString().match(/function\s+([^\(]+)/m);return matches&&matches[1]||""},isNode:function(obj){if(!div)return!1;try{obj.appendChild(div),obj.removeChild(div)}catch(e){return!1}return!0},isElement:function(obj){return obj&&1===obj.nodeType&&buster.isNode(obj)},isArray:function(arr){return"[object Array]"==Object.prototype.toString.call(arr)},flatten:function flatten(arr){for(var result=[],arr=arr||[],i=0,l=arr.length;l>i;++i)result=result.concat(buster.isArray(arr[i])?flatten(arr[i]):arr[i]);return result},each:function(arr,callback){for(var i=0,l=arr.length;l>i;++i)callback(arr[i])},map:function(arr,callback){for(var results=[],i=0,l=arr.length;l>i;++i)results.push(callback(arr[i]));return results},parallel:function(fns,callback){function cb(err,res){"function"==typeof callback&&(callback(err,res),callback=null)}function makeDone(num){return function(err,result){return err?cb(err):(results[num]=result,0==--remaining&&cb(null,results),void 0)}}if(0==fns.length)return cb(null,[]);for(var remaining=fns.length,results=[],i=0,l=fns.length;l>i;++i)fns[i](makeDone(i))},series:function(fns,callback){function cb(err,res){"function"==typeof callback&&callback(err,res)}function callNext(){if(0==remaining.length)return cb(null,results);var promise=remaining.shift()(next);promise&&"function"==typeof promise.then&&promise.then(buster.partial(next,null),next)}function next(err,result){return err?cb(err):(results.push(result),callNext(),void 0)}var remaining=fns.slice(),results=[];callNext()},countdown:function(num,done){return function(){0==--num&&done()}}};if("object"==typeof process&&"function"==typeof require&&"object"==typeof module){var crypto=require("crypto"),path=require("path");buster.tmpFile=function(fileName){var hashed=crypto.createHash("sha1");hashed.update(fileName);var tmpfileName=hashed.digest("hex");return"win32"==process.platform?path.join(process.env.TEMP,tmpfileName):path.join("/tmp",tmpfileName)}}return buster.some=Array.prototype.some?function(arr,fn,thisp){return arr.some(fn,thisp)}:function(arr,fun,thisp){if(null==arr)throw new TypeError;arr=Object(arr);var len=arr.length>>>0;if("function"!=typeof fun)throw new TypeError;for(var i=0;len>i;i++)if(arr.hasOwnProperty(i)&&fun.call(thisp,arr[i],i,arr))return!0;return!1},buster.filter=Array.prototype.filter?function(arr,fn,thisp){return arr.filter(fn,thisp)}:function(fn,thisp){if(null==this)throw new TypeError;var t=Object(this),len=t.length>>>0;if("function"!=typeof fn)throw new TypeError;for(var res=[],i=0;len>i;i++)if(i in t){var val=t[i];fn.call(thisp,val,i,t)&&res.push(val)}return res},isNode&&(module.exports=buster,buster.eventEmitter=require("./buster-event-emitter"),Object.defineProperty(buster,"defineVersionGetter",{get:function(){return require("./define-version-getter")}})),buster.extend(B||{},buster)}(setTimeout,buster);if("undefined"==typeof buster)var buster={};"object"==typeof module&&"function"==typeof require&&(buster=require("buster-core")),buster.format=buster.format||{},buster.format.excludeConstructors=["Object",/^.$/],buster.format.quoteStrings=!0,buster.format.ascii=function(){function keys(object){var k=Object.keys&&Object.keys(object)||[];if(0==k.length)for(var prop in object)hasOwn.call(object,prop)&&k.push(prop);return k.sort()}function isCircular(object,objects){if("object"!=typeof object)return!1;for(var i=0,l=objects.length;l>i;++i)if(objects[i]===object)return!0;return!1}function ascii(object,processed,indent){if("string"==typeof object){var quote="boolean"!=typeof this.quoteStrings||this.quoteStrings;return processed||quote?'"'+object+'"':object}if("function"==typeof object&&!(object instanceof RegExp))return ascii.func(object);if(processed=processed||[],isCircular(object,processed))return"[Circular]";if("[object Array]"==Object.prototype.toString.call(object))return ascii.array.call(this,object,processed);if(!object)return""+object;if(buster.isElement(object))return ascii.element(object);if("function"==typeof object.toString&&object.toString!==Object.prototype.toString)return object.toString();for(var i=0,l=specialObjects.length;l>i;i++)if(object===specialObjects[i].obj)return specialObjects[i].value;return ascii.object.call(this,object,processed,indent)}var hasOwn=Object.prototype.hasOwnProperty,specialObjects=[];return"undefined"!=typeof global&&specialObjects.push({obj:global,value:"[object global]"}),"undefined"!=typeof document&&specialObjects.push({obj:document,value:"[object HTMLDocument]"}),"undefined"!=typeof window&&specialObjects.push({obj:window,value:"[object Window]"}),ascii.func=function(func){return"function "+buster.functionName(func)+"() {}"},ascii.array=function(array,processed){processed=processed||[],processed.push(array);for(var pieces=[],i=0,l=array.length;l>i;++i)pieces.push(ascii.call(this,array[i],processed));return"["+pieces.join(", ")+"]"},ascii.object=function(object,processed,indent){processed=processed||[],processed.push(object),indent=indent||0;for(var prop,str,obj,pieces=[],properties=keys(object),is="",length=3,i=0,l=indent;l>i;++i)is+=" ";for(i=0,l=properties.length;l>i;++i)prop=properties[i],obj=object[prop],str=isCircular(obj,processed)?"[Circular]":ascii.call(this,obj,processed,indent+2),str=(/\s/.test(prop)?'"'+prop+'"':prop)+": "+str,length+=str.length,pieces.push(str);var cons=ascii.constructorName.call(this,object),prefix=cons?"["+cons+"] ":"";return length+indent>80?prefix+"{\n  "+is+pieces.join(",\n  "+is)+"\n"+is+"}":prefix+"{ "+pieces.join(", ")+" }"},ascii.element=function(element){for(var attribute,attrName,tagName=element.tagName.toLowerCase(),attrs=element.attributes,pairs=[],i=0,l=attrs.length;l>i;++i)attribute=attrs.item(i),attrName=attribute.nodeName.toLowerCase().replace("html:",""),("contenteditable"!=attrName||"inherit"!=attribute.nodeValue)&&attribute.nodeValue&&pairs.push(attrName+'="'+attribute.nodeValue+'"');var formatted="<"+tagName+(pairs.length>0?" ":""),content=element.innerHTML;content.length>20&&(content=content.substr(0,20)+"[...]");var res=formatted+pairs.join(" ")+">"+content+"</"+tagName+">";return res.replace(/ contentEditable="inherit"/,"")},ascii.constructorName=function(object){for(var name=buster.functionName(object&&object.constructor),excludes=this.excludeConstructors||buster.format.excludeConstructors||[],i=0,l=excludes.length;l>i;++i){if("string"==typeof excludes[i]&&excludes[i]==name)return"";if(excludes[i].test&&excludes[i].test(name))return""}return name},ascii}(),"undefined"!=typeof module&&(module.exports=buster.format);var sinon=function(buster){function isDOMNode(obj){var success=!1;try{obj.appendChild(div),success=div.parentNode==obj}catch(e){return!1}finally{try{obj.removeChild(div)}catch(e){}}return success}function isElement(obj){return div&&obj&&1===obj.nodeType&&isDOMNode(obj)}function isFunction(obj){return"function"==typeof obj||!!(obj&&obj.constructor&&obj.call&&obj.apply)}function mirrorProperties(target,source){for(var prop in source)hasOwn.call(target,prop)||(target[prop]=source[prop])}function isRestorable(obj){return"function"==typeof obj&&"function"==typeof obj.restore&&obj.restore.sinon}var div="undefined"!=typeof document&&document.createElement("div"),hasOwn=Object.prototype.hasOwnProperty,sinon={wrapMethod:function(object,property,method){if(!object)throw new TypeError("Should wrap property of object");if("function"!=typeof method)throw new TypeError("Method wrapper should be function");var wrappedMethod=object[property];if(!isFunction(wrappedMethod))throw new TypeError("Attempted to wrap "+typeof wrappedMethod+" property "+property+" as function");if(wrappedMethod.restore&&wrappedMethod.restore.sinon)throw new TypeError("Attempted to wrap "+property+" which is already wrapped");if(wrappedMethod.calledBefore){var verb=wrappedMethod.returns?"stubbed":"spied on";throw new TypeError("Attempted to wrap "+property+" which is already "+verb)}var owned=hasOwn.call(object,property);return object[property]=method,method.displayName=property,method.restore=function(){owned||delete object[property],object[property]===method&&(object[property]=wrappedMethod)},method.restore.sinon=!0,mirrorProperties(method,wrappedMethod),method},extend:function(target){for(var i=1,l=arguments.length;l>i;i+=1)for(var prop in arguments[i])arguments[i].hasOwnProperty(prop)&&(target[prop]=arguments[i][prop]),arguments[i].hasOwnProperty("toString")&&arguments[i].toString!=target.toString&&(target.toString=arguments[i].toString);return target},create:function(proto){var F=function(){};return F.prototype=proto,new F},deepEqual:function deepEqual(a,b){if(sinon.match&&sinon.match.isMatcher(a))return a.test(b);if("object"!=typeof a||"object"!=typeof b)return a===b;if(isElement(a)||isElement(b))return a===b;if(a===b)return!0;if(null===a&&null!==b||null!==a&&null===b)return!1;var aString=Object.prototype.toString.call(a);if(aString!=Object.prototype.toString.call(b))return!1;if("[object Array]"==aString){if(a.length!==b.length)return!1;for(var i=0,l=a.length;l>i;i+=1)if(!deepEqual(a[i],b[i]))return!1;return!0}if("[object Date]"==aString)return a.valueOf()===b.valueOf();var prop,aLength=0,bLength=0;for(prop in a)if(aLength+=1,!deepEqual(a[prop],b[prop]))return!1;for(prop in b)bLength+=1;return aLength==bLength},functionName:function(func){var name=func.displayName||func.name;if(!name){var matches=func.toString().match(/function ([^\s\(]+)/);name=matches&&matches[1]}return name},functionToString:function(){if(this.getCall&&this.callCount)for(var thisValue,prop,i=this.callCount;i--;){thisValue=this.getCall(i).thisValue;for(prop in thisValue)if(thisValue[prop]===this)return prop}return this.displayName||"sinon fake"},getConfig:function(custom){var config={};custom=custom||{};var defaults=sinon.defaultConfig;for(var prop in defaults)defaults.hasOwnProperty(prop)&&(config[prop]=custom.hasOwnProperty(prop)?custom[prop]:defaults[prop]);return config},format:function(val){return""+val},defaultConfig:{injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},timesInWords:function(count){return 1==count&&"once"||2==count&&"twice"||3==count&&"thrice"||(count||0)+" times"},calledInOrder:function(spies){for(var i=1,l=spies.length;l>i;i++)if(!spies[i-1].calledBefore(spies[i])||!spies[i].called)return!1;return!0},orderByFirstCall:function(spies){return spies.sort(function(a,b){var aCall=a.getCall(0),bCall=b.getCall(0),aId=aCall&&aCall.callId||-1,bId=bCall&&bCall.callId||-1;return bId>aId?-1:1})},log:function(){},logError:function(label,err){var msg=label+" threw exception: ";sinon.log(msg+"["+err.name+"] "+err.message),err.stack&&sinon.log(err.stack),setTimeout(function(){throw err.message=msg+err.message,err},0)},typeOf:function(value){if(null===value)return"null";if(void 0===value)return"undefined";var string=Object.prototype.toString.call(value);return string.substring(8,string.length-1).toLowerCase()},createStubInstance:function(constructor){if("function"!=typeof constructor)throw new TypeError("The constructor should be a function.");return sinon.stub(sinon.create(constructor.prototype))},restore:function(object){if(null!==object&&"object"==typeof object)for(var prop in object)isRestorable(object[prop])&&object[prop].restore();else isRestorable(object)&&object.restore()}},isNode="object"==typeof module&&"function"==typeof require;if(isNode){try{buster={format:require("buster-format")}}catch(e){}module.exports=sinon,module.exports.spy=require("./sinon/spy"),module.exports.stub=require("./sinon/stub"),module.exports.mock=require("./sinon/mock"),module.exports.collection=require("./sinon/collection"),module.exports.assert=require("./sinon/assert"),module.exports.sandbox=require("./sinon/sandbox"),module.exports.test=require("./sinon/test"),module.exports.testCase=require("./sinon/test_case"),module.exports.assert=require("./sinon/assert"),module.exports.match=require("./sinon/match")}if(buster){var formatter=sinon.create(buster.format);formatter.quoteStrings=!1,sinon.format=function(){return formatter.ascii.apply(formatter,arguments)}}else if(isNode)try{var util=require("util");sinon.format=function(value){return"object"==typeof value&&value.toString===Object.prototype.toString?util.inspect(value):value}}catch(e){}return sinon}("object"==typeof buster&&buster);!function(sinon){function assertType(value,type,name){var actual=sinon.typeOf(value);if(actual!==type)throw new TypeError("Expected type of "+name+" to be "+type+", but was "+actual)}function isMatcher(object){return matcher.isPrototypeOf(object)}function matchObject(expectation,actual){if(null===actual||void 0===actual)return!1;for(var key in expectation)if(expectation.hasOwnProperty(key)){var exp=expectation[key],act=actual[key];if(match.isMatcher(exp)){if(!exp.test(act))return!1}else if("object"===sinon.typeOf(exp)){if(!matchObject(exp,act))return!1}else if(!sinon.deepEqual(exp,act))return!1}return!0}function createPropertyMatcher(propertyTest,messagePrefix){return function(property,value){assertType(property,"string","property");var onlyProperty=1===arguments.length,message=messagePrefix+'("'+property+'"';return onlyProperty||(message+=", "+value),message+=")",match(function(actual){return void 0!==actual&&null!==actual&&propertyTest(actual,property)?onlyProperty||sinon.deepEqual(value,actual[property]):!1},message)}}var commonJSModule="object"==typeof module&&"function"==typeof require;if(!sinon&&commonJSModule&&(sinon=require("../sinon")),sinon){var matcher={toString:function(){return this.message}};matcher.or=function(m2){if(!isMatcher(m2))throw new TypeError("Matcher expected");var m1=this,or=sinon.create(matcher);return or.test=function(actual){return m1.test(actual)||m2.test(actual)},or.message=m1.message+".or("+m2.message+")",or},matcher.and=function(m2){if(!isMatcher(m2))throw new TypeError("Matcher expected");var m1=this,and=sinon.create(matcher);return and.test=function(actual){return m1.test(actual)&&m2.test(actual)},and.message=m1.message+".and("+m2.message+")",and};var match=function(expectation,message){var m=sinon.create(matcher),type=sinon.typeOf(expectation);switch(type){case"object":if("function"==typeof expectation.test)return m.test=function(actual){return expectation.test(actual)===!0},m.message="match("+sinon.functionName(expectation.test)+")",m;var str=[];for(var key in expectation)expectation.hasOwnProperty(key)&&str.push(key+": "+expectation[key]);m.test=function(actual){return matchObject(expectation,actual)},m.message="match("+str.join(", ")+")";break;case"number":m.test=function(actual){return expectation==actual};break;case"string":m.test=function(actual){return"string"!=typeof actual?!1:-1!==actual.indexOf(expectation)},m.message='match("'+expectation+'")';break;case"regexp":m.test=function(actual){return"string"!=typeof actual?!1:expectation.test(actual)};break;case"function":m.test=expectation,m.message=message?message:"match("+sinon.functionName(expectation)+")";break;default:m.test=function(actual){return sinon.deepEqual(expectation,actual)}}return m.message||(m.message="match("+expectation+")"),m};match.isMatcher=isMatcher,match.any=match(function(){return!0},"any"),match.defined=match(function(actual){return null!==actual&&void 0!==actual},"defined"),match.truthy=match(function(actual){return!!actual},"truthy"),match.falsy=match(function(actual){return!actual},"falsy"),match.same=function(expectation){return match(function(actual){return expectation===actual},"same("+expectation+")")},match.typeOf=function(type){return assertType(type,"string","type"),match(function(actual){return sinon.typeOf(actual)===type},'typeOf("'+type+'")')},match.instanceOf=function(type){return assertType(type,"function","type"),match(function(actual){return actual instanceof type},"instanceOf("+sinon.functionName(type)+")")},match.has=createPropertyMatcher(function(actual,property){return"object"==typeof actual?property in actual:void 0!==actual[property]},"has"),match.hasOwn=createPropertyMatcher(function(actual,property){return actual.hasOwnProperty(property)},"hasOwn"),match.bool=match.typeOf("boolean"),match.number=match.typeOf("number"),match.string=match.typeOf("string"),match.object=match.typeOf("object"),match.func=match.typeOf("function"),match.array=match.typeOf("array"),match.regexp=match.typeOf("regexp"),match.date=match.typeOf("date"),commonJSModule?module.exports=match:sinon.match=match}}("object"==typeof sinon&&sinon||null);var commonJSModule="object"==typeof module&&"function"==typeof require;if(!this.sinon&&commonJSModule)var sinon=require("../sinon");if(function(sinon){function throwYieldError(proxy,text,args){var msg=sinon.functionName(proxy)+text;throw args.length&&(msg+=" Received ["+slice.call(args).join(", ")+"]"),new Error(msg)}function createSpyCall(spy,thisValue,args,returnValue,exception,id){if("number"!=typeof id)throw new TypeError("Call id is not a number");var proxyCall=sinon.create(callProto);return proxyCall.proxy=spy,proxyCall.thisValue=thisValue,proxyCall.args=args,proxyCall.returnValue=returnValue,proxyCall.exception=exception,proxyCall.callId=id,proxyCall}var slice=Array.prototype.slice,callProto={calledOn:function(thisValue){return sinon.match&&sinon.match.isMatcher(thisValue)?thisValue.test(this.thisValue):this.thisValue===thisValue},calledWith:function(){for(var i=0,l=arguments.length;l>i;i+=1)if(!sinon.deepEqual(arguments[i],this.args[i]))return!1;return!0},calledWithMatch:function(){for(var i=0,l=arguments.length;l>i;i+=1){var actual=this.args[i],expectation=arguments[i];if(!sinon.match||!sinon.match(expectation).test(actual))return!1}return!0},calledWithExactly:function(){return arguments.length==this.args.length&&this.calledWith.apply(this,arguments)},notCalledWith:function(){return!this.calledWith.apply(this,arguments)},notCalledWithMatch:function(){return!this.calledWithMatch.apply(this,arguments)},returned:function(value){return sinon.deepEqual(value,this.returnValue)},threw:function(error){return"undefined"!=typeof error&&this.exception?this.exception===error||this.exception.name===error:!!this.exception},calledWithNew:function(){return this.thisValue instanceof this.proxy},calledBefore:function(other){return this.callId<other.callId},calledAfter:function(other){return this.callId>other.callId},callArg:function(pos){this.args[pos]()},callArgOn:function(pos,thisValue){this.args[pos].apply(thisValue)},callArgWith:function(pos){this.callArgOnWith.apply(this,[pos,null].concat(slice.call(arguments,1)))},callArgOnWith:function(pos,thisValue){var args=slice.call(arguments,2);this.args[pos].apply(thisValue,args)},yield:function(){this.yieldOn.apply(this,[null].concat(slice.call(arguments,0)))},yieldOn:function(thisValue){for(var args=this.args,i=0,l=args.length;l>i;++i)if("function"==typeof args[i])return args[i].apply(thisValue,slice.call(arguments,1)),void 0;throwYieldError(this.proxy," cannot yield since no callback was passed.",args)},yieldTo:function(prop){this.yieldToOn.apply(this,[prop,null].concat(slice.call(arguments,1)))},yieldToOn:function(prop,thisValue){for(var args=this.args,i=0,l=args.length;l>i;++i)if(args[i]&&"function"==typeof args[i][prop])return args[i][prop].apply(thisValue,slice.call(arguments,2)),void 0;throwYieldError(this.proxy," cannot yield to '"+prop+"' since no callback was passed.",args)},toString:function(){for(var callStr=this.proxy.toString()+"(",args=[],i=0,l=this.args.length;l>i;++i)args.push(sinon.format(this.args[i]));return callStr=callStr+args.join(", ")+")","undefined"!=typeof this.returnValue&&(callStr+=" => "+sinon.format(this.returnValue)),this.exception&&(callStr+=" !"+this.exception.name,this.exception.message&&(callStr+="("+this.exception.message+")")),callStr}};callProto.invokeCallback=callProto.yield,createSpyCall.toString=callProto.toString,sinon.spyCall=createSpyCall}("object"==typeof sinon&&sinon||null),function(sinon){function spy(object,property){if(!property&&"function"==typeof object)return spy.create(object);if(!object&&!property)return spy.create(function(){});var method=object[property];return sinon.wrapMethod(object,property,spy.create(method))}function matchingFake(fakes,args,strict){if(fakes){args.length;for(var i=0,l=fakes.length;l>i;i++)if(fakes[i].matches(args,strict))return fakes[i]}}function incrementCallCount(){this.called=!0,this.callCount+=1,this.notCalled=!1,this.calledOnce=1==this.callCount,this.calledTwice=2==this.callCount,this.calledThrice=3==this.callCount}function createCallProperties(){this.firstCall=this.getCall(0),this.secondCall=this.getCall(1),this.thirdCall=this.getCall(2),this.lastCall=this.getCall(this.callCount-1)}function createProxy(func){var p;return func.length?eval("p = (function proxy("+vars.substring(0,2*func.length-1)+") { return p.invoke(func, this, slice.call(arguments)); });"):p=function(){return p.invoke(func,this,slice.call(arguments))},p}function delegateToCalls(method,matchAny,actual,notCalled){spyApi[method]=function(){if(!this.called)return notCalled?notCalled.apply(this,arguments):!1;for(var currentCall,matches=0,i=0,l=this.callCount;l>i;i+=1)if(currentCall=this.getCall(i),currentCall[actual||method].apply(currentCall,arguments)&&(matches+=1,matchAny))return!0;return matches===this.callCount}}var commonJSModule="object"==typeof module&&"function"==typeof require,push=Array.prototype.push,slice=Array.prototype.slice,callId=0,vars="a,b,c,d,e,f,g,h,i,j,k,l",uuid=0,spyApi={reset:function(){if(this.called=!1,this.notCalled=!0,this.calledOnce=!1,this.calledTwice=!1,this.calledThrice=!1,this.callCount=0,this.firstCall=null,this.secondCall=null,this.thirdCall=null,this.lastCall=null,this.args=[],this.returnValues=[],this.thisValues=[],this.exceptions=[],this.callIds=[],this.fakes)for(var i=0;i<this.fakes.length;i++)this.fakes[i].reset()},create:function(func){var name;"function"!=typeof func?func=function(){}:name=sinon.functionName(func);var proxy=createProxy(func);return sinon.extend(proxy,spy),delete proxy.create,sinon.extend(proxy,func),proxy.reset(),proxy.prototype=func.prototype,proxy.displayName=name||"spy",proxy.toString=sinon.functionToString,proxy._create=sinon.spy.create,proxy.id="spy#"+uuid++,proxy},invoke:function(func,thisValue,args){var exception,returnValue,matching=matchingFake(this.fakes,args);incrementCallCount.call(this),push.call(this.thisValues,thisValue),push.call(this.args,args),push.call(this.callIds,callId++);try{returnValue=matching?matching.invoke(func,thisValue,args):(this.func||func).apply(thisValue,args)}catch(e){throw push.call(this.returnValues,void 0),exception=e,e}finally{push.call(this.exceptions,exception)}return push.call(this.returnValues,returnValue),createCallProperties.call(this),returnValue},getCall:function(i){return 0>i||i>=this.callCount?null:sinon.spyCall(this,this.thisValues[i],this.args[i],this.returnValues[i],this.exceptions[i],this.callIds[i])},calledBefore:function(spyFn){return this.called?spyFn.called?this.callIds[0]<spyFn.callIds[spyFn.callIds.length-1]:!0:!1},calledAfter:function(spyFn){return this.called&&spyFn.called?this.callIds[this.callCount-1]>spyFn.callIds[spyFn.callCount-1]:!1},withArgs:function(){var args=slice.call(arguments);if(this.fakes){var match=matchingFake(this.fakes,args,!0);if(match)return match}else this.fakes=[];var original=this,fake=this._create();fake.matchingAguments=args,push.call(this.fakes,fake),fake.withArgs=function(){return original.withArgs.apply(original,arguments)};for(var i=0;i<this.args.length;i++)fake.matches(this.args[i])&&(incrementCallCount.call(fake),push.call(fake.thisValues,this.thisValues[i]),push.call(fake.args,this.args[i]),push.call(fake.returnValues,this.returnValues[i]),push.call(fake.exceptions,this.exceptions[i]),push.call(fake.callIds,this.callIds[i]));return createCallProperties.call(fake),fake},matches:function(args,strict){var margs=this.matchingAguments;return margs.length<=args.length&&sinon.deepEqual(margs,args.slice(0,margs.length))?!strict||margs.length==args.length:void 0},printf:function(format){var formatter,spy=this,args=slice.call(arguments,1);return(format||"").replace(/%(.)/g,function(match,specifyer){return formatter=spyApi.formatters[specifyer],"function"==typeof formatter?formatter.call(null,spy,args):isNaN(parseInt(specifyer),10)?"%"+specifyer:sinon.format(args[specifyer-1])})}};delegateToCalls("calledOn",!0),delegateToCalls("alwaysCalledOn",!1,"calledOn"),delegateToCalls("calledWith",!0),delegateToCalls("calledWithMatch",!0),delegateToCalls("alwaysCalledWith",!1,"calledWith"),delegateToCalls("alwaysCalledWithMatch",!1,"calledWithMatch"),delegateToCalls("calledWithExactly",!0),delegateToCalls("alwaysCalledWithExactly",!1,"calledWithExactly"),delegateToCalls("neverCalledWith",!1,"notCalledWith",function(){return!0}),delegateToCalls("neverCalledWithMatch",!1,"notCalledWithMatch",function(){return!0}),delegateToCalls("threw",!0),delegateToCalls("alwaysThrew",!1,"threw"),delegateToCalls("returned",!0),delegateToCalls("alwaysReturned",!1,"returned"),delegateToCalls("calledWithNew",!0),delegateToCalls("alwaysCalledWithNew",!1,"calledWithNew"),delegateToCalls("callArg",!1,"callArgWith",function(){throw new Error(this.toString()+" cannot call arg since it was not yet invoked.")}),spyApi.callArgWith=spyApi.callArg,delegateToCalls("callArgOn",!1,"callArgOnWith",function(){throw new Error(this.toString()+" cannot call arg since it was not yet invoked.")}),spyApi.callArgOnWith=spyApi.callArgOn,delegateToCalls("yield",!1,"yield",function(){throw new Error(this.toString()+" cannot yield since it was not yet invoked.")}),spyApi.invokeCallback=spyApi.yield,delegateToCalls("yieldOn",!1,"yieldOn",function(){throw new Error(this.toString()+" cannot yield since it was not yet invoked.")}),delegateToCalls("yieldTo",!1,"yieldTo",function(property){throw new Error(this.toString()+" cannot yield to '"+property+"' since it was not yet invoked.")}),delegateToCalls("yieldToOn",!1,"yieldToOn",function(property){throw new Error(this.toString()+" cannot yield to '"+property+"' since it was not yet invoked.")}),spyApi.formatters={c:function(spy){return sinon.timesInWords(spy.callCount)},n:function(spy){return spy.toString()},C:function(spy){for(var calls=[],i=0,l=spy.callCount;l>i;++i){var stringifiedCall="    "+spy.getCall(i).toString();/\n/.test(calls[i-1])&&(stringifiedCall="\n"+stringifiedCall),push.call(calls,stringifiedCall)}return calls.length>0?"\n"+calls.join("\n"):""},t:function(spy){for(var objects=[],i=0,l=spy.callCount;l>i;++i)push.call(objects,sinon.format(spy.thisValues[i]));return objects.join(", ")},"*":function(spy,args){for(var formatted=[],i=0,l=args.length;l>i;++i)push.call(formatted,sinon.format(args[i]));return formatted.join(", ")}},sinon.extend(spy,spyApi),spy.spyCall=sinon.spyCall,commonJSModule?module.exports=spy:sinon.spy=spy}("object"==typeof sinon&&sinon||null),function(sinon){function stub(object,property,func){if(func&&"function"!=typeof func)throw new TypeError("Custom stub should be function");var wrapper;if(wrapper=func?sinon.spy&&sinon.spy.create?sinon.spy.create(func):func:stub.create(),!object&&!property)return sinon.stub.create();if(!property&&object&&"object"==typeof object){for(var prop in object)"function"==typeof object[prop]&&stub(object,prop);return object}return sinon.wrapMethod(object,property,wrapper)}function getChangingValue(stub,property){var index=stub.callCount-1,values=stub[property],prop=index in values?values[index]:values[values.length-1];return stub[property+"Last"]=prop,prop}function getCallback(stub,args){var callArgAt=getChangingValue(stub,"callArgAts");if(0>callArgAt){for(var callArgProp=getChangingValue(stub,"callArgProps"),i=0,l=args.length;l>i;++i){if(!callArgProp&&"function"==typeof args[i])return args[i];if(callArgProp&&args[i]&&"function"==typeof args[i][callArgProp])return args[i][callArgProp]}return null}return args[callArgAt]}function getCallbackError(stub,func,args){if(stub.callArgAtsLast<0){var msg;return msg=stub.callArgPropsLast?sinon.functionName(stub)+" expected to yield to '"+stub.callArgPropsLast+"', but no object with such a property was passed.":sinon.functionName(stub)+" expected to yield, but no callback was passed.",args.length>0&&(msg+=" Received ["+join.call(args,", ")+"]"),msg}return"argument at index "+stub.callArgAtsLast+" is not a function: "+func}function callCallback(stub,args){if(stub.callArgAts.length>0){var func=getCallback(stub,args);if("function"!=typeof func)throw new TypeError(getCallbackError(stub,func,args));var callbackArguments=getChangingValue(stub,"callbackArguments"),callbackContext=getChangingValue(stub,"callbackContexts");stub.callbackAsync?nextTick(function(){func.apply(callbackContext,callbackArguments)}):func.apply(callbackContext,callbackArguments)}}var commonJSModule="object"==typeof module&&"function"==typeof require;if(!sinon&&commonJSModule&&(sinon=require("../sinon")),sinon){var join=Array.prototype.join,nextTick=function(){return"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:"function"==typeof setImmediate?setImmediate:function(callback){setTimeout(callback,0)}}(),uuid=0;sinon.extend(stub,function(){function throwsException(error,message){return"string"==typeof error?(this.exception=new Error(message||""),this.exception.name=error):this.exception=error?error:new Error("Error"),this}var proto,slice=Array.prototype.slice;proto={create:function(){var functionStub=function(){if(callCallback(functionStub,arguments),functionStub.exception)throw functionStub.exception;return"number"==typeof functionStub.returnArgAt?arguments[functionStub.returnArgAt]:functionStub.returnThis?this:functionStub.returnValue};functionStub.id="stub#"+uuid++;var orig=functionStub;return functionStub=sinon.spy.create(functionStub),functionStub.func=orig,functionStub.callArgAts=[],functionStub.callbackArguments=[],functionStub.callbackContexts=[],functionStub.callArgProps=[],sinon.extend(functionStub,stub),functionStub._create=sinon.stub.create,functionStub.displayName="stub",functionStub.toString=sinon.functionToString,functionStub},resetBehavior:function(){var i;if(this.callArgAts=[],this.callbackArguments=[],this.callbackContexts=[],this.callArgProps=[],delete this.returnValue,delete this.returnArgAt,this.returnThis=!1,this.fakes)for(i=0;i<this.fakes.length;i++)this.fakes[i].resetBehavior()},returns:function(value){return this.returnValue=value,this},returnsArg:function(pos){if("number"!=typeof pos)throw new TypeError("argument index is not number");return this.returnArgAt=pos,this},returnsThis:function(){return this.returnThis=!0,this},"throws":throwsException,throwsException:throwsException,callsArg:function(pos){if("number"!=typeof pos)throw new TypeError("argument index is not number");return this.callArgAts.push(pos),this.callbackArguments.push([]),this.callbackContexts.push(void 0),this.callArgProps.push(void 0),this},callsArgOn:function(pos,context){if("number"!=typeof pos)throw new TypeError("argument index is not number");
if("object"!=typeof context)throw new TypeError("argument context is not an object");return this.callArgAts.push(pos),this.callbackArguments.push([]),this.callbackContexts.push(context),this.callArgProps.push(void 0),this},callsArgWith:function(pos){if("number"!=typeof pos)throw new TypeError("argument index is not number");return this.callArgAts.push(pos),this.callbackArguments.push(slice.call(arguments,1)),this.callbackContexts.push(void 0),this.callArgProps.push(void 0),this},callsArgOnWith:function(pos,context){if("number"!=typeof pos)throw new TypeError("argument index is not number");if("object"!=typeof context)throw new TypeError("argument context is not an object");return this.callArgAts.push(pos),this.callbackArguments.push(slice.call(arguments,2)),this.callbackContexts.push(context),this.callArgProps.push(void 0),this},yields:function(){return this.callArgAts.push(-1),this.callbackArguments.push(slice.call(arguments,0)),this.callbackContexts.push(void 0),this.callArgProps.push(void 0),this},yieldsOn:function(context){if("object"!=typeof context)throw new TypeError("argument context is not an object");return this.callArgAts.push(-1),this.callbackArguments.push(slice.call(arguments,1)),this.callbackContexts.push(context),this.callArgProps.push(void 0),this},yieldsTo:function(prop){return this.callArgAts.push(-1),this.callbackArguments.push(slice.call(arguments,1)),this.callbackContexts.push(void 0),this.callArgProps.push(prop),this},yieldsToOn:function(prop,context){if("object"!=typeof context)throw new TypeError("argument context is not an object");return this.callArgAts.push(-1),this.callbackArguments.push(slice.call(arguments,2)),this.callbackContexts.push(context),this.callArgProps.push(prop),this}};for(var method in proto)proto.hasOwnProperty(method)&&method.match(/^(callsArg|yields|thenYields$)/)&&!method.match(/Async/)&&(proto[method+"Async"]=function(syncFnName){return function(){return this.callbackAsync=!0,this[syncFnName].apply(this,arguments)}}(method));return proto}()),commonJSModule?module.exports=stub:sinon.stub=stub}}("object"==typeof sinon&&sinon||null),function(sinon){function mock(object){return object?mock.create(object):sinon.expectation.create("Anonymous mock")}var commonJSModule="object"==typeof module&&"function"==typeof require,push=[].push;if(!sinon&&commonJSModule&&(sinon=require("../sinon")),sinon){sinon.mock=mock,sinon.extend(mock,function(){function each(collection,callback){if(collection)for(var i=0,l=collection.length;l>i;i+=1)callback(collection[i])}return{create:function(object){if(!object)throw new TypeError("object is null");var mockObject=sinon.extend({},mock);return mockObject.object=object,delete mockObject.create,mockObject},expects:function(method){if(!method)throw new TypeError("method is falsy");if(this.expectations||(this.expectations={},this.proxies=[]),!this.expectations[method]){this.expectations[method]=[];var mockObject=this;sinon.wrapMethod(this.object,method,function(){return mockObject.invokeMethod(method,this,arguments)}),push.call(this.proxies,method)}var expectation=sinon.expectation.create(method);return push.call(this.expectations[method],expectation),expectation},restore:function(){var object=this.object;each(this.proxies,function(proxy){"function"==typeof object[proxy].restore&&object[proxy].restore()})},verify:function(){var expectations=this.expectations||{},messages=[],met=[];return each(this.proxies,function(proxy){each(expectations[proxy],function(expectation){expectation.met()?push.call(met,expectation.toString()):push.call(messages,expectation.toString())})}),this.restore(),messages.length>0?sinon.expectation.fail(messages.concat(met).join("\n")):sinon.expectation.pass(messages.concat(met).join("\n")),!0},invokeMethod:function(method,thisValue,args){var i,expectations=this.expectations&&this.expectations[method],length=expectations&&expectations.length||0;for(i=0;length>i;i+=1)if(!expectations[i].met()&&expectations[i].allowsCall(thisValue,args))return expectations[i].apply(thisValue,args);var available,messages=[],exhausted=0;for(i=0;length>i;i+=1)expectations[i].allowsCall(thisValue,args)?available=available||expectations[i]:exhausted+=1,push.call(messages,"    "+expectations[i].toString());return 0===exhausted?available.apply(thisValue,args):(messages.unshift("Unexpected call: "+sinon.spyCall.toString.call({proxy:method,args:args})),sinon.expectation.fail(messages.join("\n")),void 0)}}}());var times=sinon.timesInWords;sinon.expectation=function(){function callCountInWords(callCount){return 0==callCount?"never called":"called "+times(callCount)}function expectedCallCountInWords(expectation){var min=expectation.minCalls,max=expectation.maxCalls;if("number"==typeof min&&"number"==typeof max){var str=times(min);return min!=max&&(str="at least "+str+" and at most "+times(max)),str}return"number"==typeof min?"at least "+times(min):"at most "+times(max)}function receivedMinCalls(expectation){var hasMinLimit="number"==typeof expectation.minCalls;return!hasMinLimit||expectation.callCount>=expectation.minCalls}function receivedMaxCalls(expectation){return"number"!=typeof expectation.maxCalls?!1:expectation.callCount==expectation.maxCalls}var slice=Array.prototype.slice,_invoke=sinon.spy.invoke;return{minCalls:1,maxCalls:1,create:function(methodName){var expectation=sinon.extend(sinon.stub.create(),sinon.expectation);return delete expectation.create,expectation.method=methodName,expectation},invoke:function(func,thisValue,args){return this.verifyCallAllowed(thisValue,args),_invoke.apply(this,arguments)},atLeast:function(num){if("number"!=typeof num)throw new TypeError("'"+num+"' is not number");return this.limitsSet||(this.maxCalls=null,this.limitsSet=!0),this.minCalls=num,this},atMost:function(num){if("number"!=typeof num)throw new TypeError("'"+num+"' is not number");return this.limitsSet||(this.minCalls=null,this.limitsSet=!0),this.maxCalls=num,this},never:function(){return this.exactly(0)},once:function(){return this.exactly(1)},twice:function(){return this.exactly(2)},thrice:function(){return this.exactly(3)},exactly:function(num){if("number"!=typeof num)throw new TypeError("'"+num+"' is not a number");return this.atLeast(num),this.atMost(num)},met:function(){return!this.failed&&receivedMinCalls(this)},verifyCallAllowed:function(thisValue,args){if(receivedMaxCalls(this)&&(this.failed=!0,sinon.expectation.fail(this.method+" already called "+times(this.maxCalls))),"expectedThis"in this&&this.expectedThis!==thisValue&&sinon.expectation.fail(this.method+" called with "+thisValue+" as thisValue, expected "+this.expectedThis),"expectedArguments"in this){args||sinon.expectation.fail(this.method+" received no arguments, expected "+sinon.format(this.expectedArguments)),args.length<this.expectedArguments.length&&sinon.expectation.fail(this.method+" received too few arguments ("+sinon.format(args)+"), expected "+sinon.format(this.expectedArguments)),this.expectsExactArgCount&&args.length!=this.expectedArguments.length&&sinon.expectation.fail(this.method+" received too many arguments ("+sinon.format(args)+"), expected "+sinon.format(this.expectedArguments));for(var i=0,l=this.expectedArguments.length;l>i;i+=1)sinon.deepEqual(this.expectedArguments[i],args[i])||sinon.expectation.fail(this.method+" received wrong arguments "+sinon.format(args)+", expected "+sinon.format(this.expectedArguments))}},allowsCall:function(thisValue,args){if(this.met()&&receivedMaxCalls(this))return!1;if("expectedThis"in this&&this.expectedThis!==thisValue)return!1;if(!("expectedArguments"in this))return!0;if(args=args||[],args.length<this.expectedArguments.length)return!1;if(this.expectsExactArgCount&&args.length!=this.expectedArguments.length)return!1;for(var i=0,l=this.expectedArguments.length;l>i;i+=1)if(!sinon.deepEqual(this.expectedArguments[i],args[i]))return!1;return!0},withArgs:function(){return this.expectedArguments=slice.call(arguments),this},withExactArgs:function(){return this.withArgs.apply(this,arguments),this.expectsExactArgCount=!0,this},on:function(thisValue){return this.expectedThis=thisValue,this},toString:function(){var args=(this.expectedArguments||[]).slice();this.expectsExactArgCount||push.call(args,"[...]");var callStr=sinon.spyCall.toString.call({proxy:this.method||"anonymous mock expectation",args:args}),message=callStr.replace(", [...","[, ...")+" "+expectedCallCountInWords(this);return this.met()?"Expectation met: "+message:"Expected "+message+" ("+callCountInWords(this.callCount)+")"},verify:function(){return this.met()?sinon.expectation.pass(this.toString()):sinon.expectation.fail(this.toString()),!0},pass:function(message){sinon.assert.pass(message)},fail:function(message){var exception=new Error(message);throw exception.name="ExpectationError",exception}}}(),commonJSModule?module.exports=mock:sinon.mock=mock}}("object"==typeof sinon&&sinon||null),function(sinon){function getFakes(fakeCollection){return fakeCollection.fakes||(fakeCollection.fakes=[]),fakeCollection.fakes}function each(fakeCollection,method){for(var fakes=getFakes(fakeCollection),i=0,l=fakes.length;l>i;i+=1)"function"==typeof fakes[i][method]&&fakes[i][method]()}function compact(fakeCollection){for(var fakes=getFakes(fakeCollection),i=0;i<fakes.length;)fakes.splice(i,1)}var commonJSModule="object"==typeof module&&"function"==typeof require,push=[].push,hasOwnProperty=Object.prototype.hasOwnProperty;if(!sinon&&commonJSModule&&(sinon=require("../sinon")),sinon){var collection={verify:function(){each(this,"verify")},restore:function(){each(this,"restore"),compact(this)},verifyAndRestore:function(){var exception;try{this.verify()}catch(e){exception=e}if(this.restore(),exception)throw exception},add:function(fake){return push.call(getFakes(this),fake),fake},spy:function(){return this.add(sinon.spy.apply(sinon,arguments))},stub:function(object,property,value){if(property){var original=object[property];if("function"!=typeof original){if(!hasOwnProperty.call(object,property))throw new TypeError("Cannot stub non-existent own property "+property);return object[property]=value,this.add({restore:function(){object[property]=original}})}}if(!property&&object&&"object"==typeof object){var stubbedObj=sinon.stub.apply(sinon,arguments);for(var prop in stubbedObj)"function"==typeof stubbedObj[prop]&&this.add(stubbedObj[prop]);return stubbedObj}return this.add(sinon.stub.apply(sinon,arguments))},mock:function(){return this.add(sinon.mock.apply(sinon,arguments))},inject:function(obj){var col=this;return obj.spy=function(){return col.spy.apply(col,arguments)},obj.stub=function(){return col.stub.apply(col,arguments)},obj.mock=function(){return col.mock.apply(col,arguments)},obj}};commonJSModule?module.exports=collection:sinon.collection=collection}}("object"==typeof sinon&&sinon||null),"undefined"==typeof sinon)var sinon={};if(function(global){function addTimer(args,recurring){if(0===args.length)throw new Error("Function requires at least 1 parameter");var toId=id++,delay=args[1]||0;return this.timeouts||(this.timeouts={}),this.timeouts[toId]={id:toId,func:args[0],callAt:this.now+delay,invokeArgs:Array.prototype.slice.call(args,2)},recurring===!0&&(this.timeouts[toId].interval=delay),toId}function parseTime(str){if(!str)return 0;var parsed,strings=str.split(":"),l=strings.length,i=l,ms=0;if(l>3||!/^(\d\d:){0,2}\d\d?$/.test(str))throw new Error("tick only understands numbers and 'h:m:s'");for(;i--;){if(parsed=parseInt(strings[i],10),parsed>=60)throw new Error("Invalid time "+str);ms+=parsed*Math.pow(60,l-i-1)}return 1e3*ms}function createObject(object){var newObject;if(Object.create)newObject=Object.create(object);else{var F=function(){};F.prototype=object,newObject=new F}return newObject.Date.clock=newObject,newObject}function mirrorDateProperties(target,source){return source.now?target.now=function(){return target.clock.now}:delete target.now,source.toSource?target.toSource=function(){return source.toSource()}:delete target.toSource,target.toString=function(){return source.toString()},target.prototype=source.prototype,target.parse=source.parse,target.UTC=source.UTC,target.prototype.toUTCString=source.prototype.toUTCString,target}function restore(){for(var method,i=0,l=this.methods.length;l>i;i++)method=this.methods[i],global[method].hadOwnProperty?global[method]=this["_"+method]:delete global[method];this.methods=[]}function stubGlobal(method,clock){if(clock[method].hadOwnProperty=Object.prototype.hasOwnProperty.call(global,method),clock["_"+method]=global[method],"Date"==method){var date=mirrorDateProperties(clock[method],global[method]);global[method]=date}else{global[method]=function(){return clock[method].apply(clock,arguments)};for(var prop in clock[method])clock[method].hasOwnProperty(prop)&&(global[method][prop]=clock[method][prop])}global[method].clock=clock}var id=1;sinon.clock={now:0,create:function(now){var clock=createObject(this);if("number"==typeof now&&(clock.now=now),now&&"object"==typeof now)throw new TypeError("now should be milliseconds since UNIX epoch");return clock},setTimeout:function(){return addTimer.call(this,arguments,!1)},clearTimeout:function(timerId){this.timeouts||(this.timeouts=[]),timerId in this.timeouts&&delete this.timeouts[timerId]},setInterval:function(){return addTimer.call(this,arguments,!0)},clearInterval:function(timerId){this.clearTimeout(timerId)},tick:function(ms){ms="number"==typeof ms?ms:parseTime(ms);for(var firstException,tickFrom=this.now,tickTo=this.now+ms,previous=this.now,timer=this.firstTimerInRange(tickFrom,tickTo);timer&&tickTo>=tickFrom;){if(this.timeouts[timer.id]){tickFrom=this.now=timer.callAt;try{this.callTimer(timer)}catch(e){firstException=firstException||e}}timer=this.firstTimerInRange(previous,tickTo),previous=tickFrom}if(this.now=tickTo,firstException)throw firstException;return this.now},firstTimerInRange:function(from,to){var timer,smallest,originalTimer;for(var id in this.timeouts)if(this.timeouts.hasOwnProperty(id)){if(this.timeouts[id].callAt<from||this.timeouts[id].callAt>to)continue;(!smallest||this.timeouts[id].callAt<smallest)&&(originalTimer=this.timeouts[id],smallest=this.timeouts[id].callAt,timer={func:this.timeouts[id].func,callAt:this.timeouts[id].callAt,interval:this.timeouts[id].interval,id:this.timeouts[id].id,invokeArgs:this.timeouts[id].invokeArgs})}return timer||null},callTimer:function(timer){"number"==typeof timer.interval?this.timeouts[timer.id].callAt+=timer.interval:delete this.timeouts[timer.id];try{"function"==typeof timer.func?timer.func.apply(null,timer.invokeArgs):eval(timer.func)}catch(e){var exception=e}if(this.timeouts[timer.id]){if(exception)throw exception}else if(exception)throw exception},reset:function(){this.timeouts={}},Date:function(){function ClockDate(year,month,date,hour,minute,second,ms){switch(arguments.length){case 0:return new NativeDate(ClockDate.clock.now);case 1:return new NativeDate(year);case 2:return new NativeDate(year,month);case 3:return new NativeDate(year,month,date);case 4:return new NativeDate(year,month,date,hour);case 5:return new NativeDate(year,month,date,hour,minute);case 6:return new NativeDate(year,month,date,hour,minute,second);default:return new NativeDate(year,month,date,hour,minute,second,ms)}}var NativeDate=Date;return mirrorDateProperties(ClockDate,NativeDate)}()};var methods=["Date","setTimeout","setInterval","clearTimeout","clearInterval"];sinon.useFakeTimers=function(now){var clock=sinon.clock.create(now);clock.restore=restore,clock.methods=Array.prototype.slice.call(arguments,"number"==typeof now?1:0),0===clock.methods.length&&(clock.methods=methods);for(var i=0,l=clock.methods.length;l>i;i++)stubGlobal(clock.methods[i],clock);return clock}}("undefined"!=typeof global&&"function"!=typeof global?global:this),sinon.timers={setTimeout:setTimeout,clearTimeout:clearTimeout,setInterval:setInterval,clearInterval:clearInterval,Date:Date},"object"==typeof module&&"function"==typeof require&&(module.exports=sinon),"undefined"==typeof sinon&&(this.sinon={}),function(){var push=[].push;sinon.Event=function(type,bubbles,cancelable,target){this.initEvent(type,bubbles,cancelable,target)},sinon.Event.prototype={initEvent:function(type,bubbles,cancelable,target){this.type=type,this.bubbles=bubbles,this.cancelable=cancelable,this.target=target},stopPropagation:function(){},preventDefault:function(){this.defaultPrevented=!0}},sinon.EventTarget={addEventListener:function(event,listener){this.eventListeners=this.eventListeners||{},this.eventListeners[event]=this.eventListeners[event]||[],push.call(this.eventListeners[event],listener)},removeEventListener:function(event,listener){for(var listeners=this.eventListeners&&this.eventListeners[event]||[],i=0,l=listeners.length;l>i;++i)if(listeners[i]==listener)return listeners.splice(i,1)},dispatchEvent:function(event){for(var type=event.type,listeners=this.eventListeners&&this.eventListeners[type]||[],i=0;i<listeners.length;i++)"function"==typeof listeners[i]?listeners[i].call(this,event):listeners[i].handleEvent(event);return!!event.defaultPrevented}}}(),"undefined"==typeof sinon&&(this.sinon={}),sinon.xhr={XMLHttpRequest:this.XMLHttpRequest},function(global){function FakeXMLHttpRequest(){function addEventListener(eventName){xhr.addEventListener(eventName,function(event){var listener=xhr["on"+eventName];listener&&"function"==typeof listener&&listener(event)})}this.readyState=FakeXMLHttpRequest.UNSENT,this.requestHeaders={},this.requestBody=null,this.status=0,this.statusText="";for(var xhr=this,events=["loadstart","load","abort","loadend"],i=events.length-1;i>=0;i--)addEventListener(events[i]);"function"==typeof FakeXMLHttpRequest.onCreate&&FakeXMLHttpRequest.onCreate(this)}function verifyState(xhr){if(xhr.readyState!==FakeXMLHttpRequest.OPENED)throw new Error("INVALID_STATE_ERR");if(xhr.sendFlag)throw new Error("INVALID_STATE_ERR")}function each(collection,callback){if(collection)for(var i=0,l=collection.length;l>i;i+=1)callback(collection[i])}function some(collection,callback){for(var index=0;index<collection.length;index++)if(callback(collection[index])===!0)return!0;return!1}function verifyRequestSent(xhr){if(xhr.readyState==FakeXMLHttpRequest.DONE)throw new Error("Request done")}function verifyHeadersReceived(xhr){if(xhr.async&&xhr.readyState!=FakeXMLHttpRequest.HEADERS_RECEIVED)throw new Error("No headers received")}function verifyResponseBodyType(body){if("string"!=typeof body){var error=new Error("Attempted to respond to fake XMLHttpRequest with "+body+", which is not a string.");throw error.name="InvalidBodyException",error}}var xhr=sinon.xhr;xhr.GlobalXMLHttpRequest=global.XMLHttpRequest,xhr.GlobalActiveXObject=global.ActiveXObject,xhr.supportsActiveX="undefined"!=typeof xhr.GlobalActiveXObject,xhr.supportsXHR="undefined"!=typeof xhr.GlobalXMLHttpRequest,xhr.workingXHR=xhr.supportsXHR?xhr.GlobalXMLHttpRequest:xhr.supportsActiveX?function(){return new xhr.GlobalActiveXObject("MSXML2.XMLHTTP.3.0")}:!1;var unsafeHeaders={"Accept-Charset":!0,"Accept-Encoding":!0,Connection:!0,"Content-Length":!0,Cookie:!0,Cookie2:!0,"Content-Transfer-Encoding":!0,Date:!0,Expect:!0,Host:!0,"Keep-Alive":!0,Referer:!0,TE:!0,Trailer:!0,"Transfer-Encoding":!0,Upgrade:!0,"User-Agent":!0,Via:!0},apply=function(obj,method,args){switch(args.length){case 0:return obj[method]();case 1:return obj[method](args[0]);case 2:return obj[method](args[0],args[1]);case 3:return obj[method](args[0],args[1],args[2]);case 4:return obj[method](args[0],args[1],args[2],args[3]);case 5:return obj[method](args[0],args[1],args[2],args[3],args[4])}};FakeXMLHttpRequest.filters=[],FakeXMLHttpRequest.addFilter=function(fn){this.filters.push(fn)};var IE6Re=/MSIE 6/;FakeXMLHttpRequest.defake=function(fakeXhr,xhrArgs){var xhr=new sinon.xhr.workingXHR;each(["open","setRequestHeader","send","abort","getResponseHeader","getAllResponseHeaders","addEventListener","overrideMimeType","removeEventListener"],function(method){fakeXhr[method]=function(){return apply(xhr,method,arguments)}});var copyAttrs=function(args){each(args,function(attr){try{fakeXhr[attr]=xhr[attr]}catch(e){if(!IE6Re.test(navigator.userAgent))throw e}})},stateChange=function(){fakeXhr.readyState=xhr.readyState,xhr.readyState>=FakeXMLHttpRequest.HEADERS_RECEIVED&&copyAttrs(["status","statusText"]),xhr.readyState>=FakeXMLHttpRequest.LOADING&&copyAttrs(["responseText"]),xhr.readyState===FakeXMLHttpRequest.DONE&&copyAttrs(["responseXML"]),fakeXhr.onreadystatechange&&fakeXhr.onreadystatechange.call(fakeXhr)};if(xhr.addEventListener){for(var event in fakeXhr.eventListeners)fakeXhr.eventListeners.hasOwnProperty(event)&&each(fakeXhr.eventListeners[event],function(handler){xhr.addEventListener(event,handler)});xhr.addEventListener("readystatechange",stateChange)}else xhr.onreadystatechange=stateChange;apply(xhr,"open",xhrArgs)},FakeXMLHttpRequest.useFilters=!1,sinon.extend(FakeXMLHttpRequest.prototype,sinon.EventTarget,{async:!0,open:function(method,url,async,username,password){if(this.method=method,this.url=url,this.async="boolean"==typeof async?async:!0,this.username=username,this.password=password,this.responseText=null,this.responseXML=null,this.requestHeaders={},this.sendFlag=!1,sinon.FakeXMLHttpRequest.useFilters===!0){var xhrArgs=arguments,defake=some(FakeXMLHttpRequest.filters,function(filter){return filter.apply(this,xhrArgs)});if(defake)return sinon.FakeXMLHttpRequest.defake(this,arguments)}this.readyStateChange(FakeXMLHttpRequest.OPENED)},readyStateChange:function(state){if(this.readyState=state,"function"==typeof this.onreadystatechange)try{this.onreadystatechange()}catch(e){sinon.logError("Fake XHR onreadystatechange handler",e)}switch(this.dispatchEvent(new sinon.Event("readystatechange")),this.readyState){case FakeXMLHttpRequest.DONE:this.dispatchEvent(new sinon.Event("load",!1,!1,this)),this.dispatchEvent(new sinon.Event("loadend",!1,!1,this))}},setRequestHeader:function(header,value){if(verifyState(this),unsafeHeaders[header]||/^(Sec-|Proxy-)/.test(header))throw new Error('Refused to set unsafe header "'+header+'"');this.requestHeaders[header]?this.requestHeaders[header]+=","+value:this.requestHeaders[header]=value},setResponseHeaders:function(headers){this.responseHeaders={};for(var header in headers)headers.hasOwnProperty(header)&&(this.responseHeaders[header]=headers[header]);this.async?this.readyStateChange(FakeXMLHttpRequest.HEADERS_RECEIVED):this.readyState=FakeXMLHttpRequest.HEADERS_RECEIVED},send:function(data){if(verifyState(this),!/^(get|head)$/i.test(this.method)){if(this.requestHeaders["Content-Type"]){var value=this.requestHeaders["Content-Type"].split(";");this.requestHeaders["Content-Type"]=value[0]+";charset=utf-8"}else this.requestHeaders["Content-Type"]="text/plain;charset=utf-8";this.requestBody=data}this.errorFlag=!1,this.sendFlag=this.async,this.readyStateChange(FakeXMLHttpRequest.OPENED),"function"==typeof this.onSend&&this.onSend(this),this.dispatchEvent(new sinon.Event("loadstart",!1,!1,this))},abort:function(){this.aborted=!0,this.responseText=null,this.errorFlag=!0,this.requestHeaders={},this.readyState>sinon.FakeXMLHttpRequest.UNSENT&&this.sendFlag&&(this.readyStateChange(sinon.FakeXMLHttpRequest.DONE),this.sendFlag=!1),this.readyState=sinon.FakeXMLHttpRequest.UNSENT,this.dispatchEvent(new sinon.Event("abort",!1,!1,this)),"function"==typeof this.onerror&&this.onerror()},getResponseHeader:function(header){if(this.readyState<FakeXMLHttpRequest.HEADERS_RECEIVED)return null;if(/^Set-Cookie2?$/i.test(header))return null;header=header.toLowerCase();for(var h in this.responseHeaders)if(h.toLowerCase()==header)return this.responseHeaders[h];return null},getAllResponseHeaders:function(){if(this.readyState<FakeXMLHttpRequest.HEADERS_RECEIVED)return"";var headers="";for(var header in this.responseHeaders)this.responseHeaders.hasOwnProperty(header)&&!/^Set-Cookie2?$/i.test(header)&&(headers+=header+": "+this.responseHeaders[header]+"\r\n");return headers},setResponseBody:function(body){verifyRequestSent(this),verifyHeadersReceived(this),verifyResponseBodyType(body);var chunkSize=this.chunkSize||10,index=0;this.responseText="";do this.async&&this.readyStateChange(FakeXMLHttpRequest.LOADING),this.responseText+=body.substring(index,index+chunkSize),index+=chunkSize;while(index<body.length);var type=this.getResponseHeader("Content-Type");if(this.responseText&&(!type||/(text\/xml)|(application\/xml)|(\+xml)/.test(type)))try{this.responseXML=FakeXMLHttpRequest.parseXML(this.responseText)}catch(e){}this.async?this.readyStateChange(FakeXMLHttpRequest.DONE):this.readyState=FakeXMLHttpRequest.DONE},respond:function(status,headers,body){this.setResponseHeaders(headers||{}),this.status="number"==typeof status?status:200,this.statusText=FakeXMLHttpRequest.statusCodes[this.status],this.setResponseBody(body||""),"function"==typeof this.onload&&this.onload()}}),sinon.extend(FakeXMLHttpRequest,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),FakeXMLHttpRequest.parseXML=function(text){var xmlDoc;if("undefined"!=typeof DOMParser){var parser=new DOMParser;xmlDoc=parser.parseFromString(text,"text/xml")}else xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async="false",xmlDoc.loadXML(text);return xmlDoc},FakeXMLHttpRequest.statusCodes={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"},sinon.useFakeXMLHttpRequest=function(){return sinon.FakeXMLHttpRequest.restore=function(keepOnCreate){xhr.supportsXHR&&(global.XMLHttpRequest=xhr.GlobalXMLHttpRequest),xhr.supportsActiveX&&(global.ActiveXObject=xhr.GlobalActiveXObject),delete sinon.FakeXMLHttpRequest.restore,keepOnCreate!==!0&&delete sinon.FakeXMLHttpRequest.onCreate},xhr.supportsXHR&&(global.XMLHttpRequest=sinon.FakeXMLHttpRequest),xhr.supportsActiveX&&(global.ActiveXObject=function(objId){return"Microsoft.XMLHTTP"==objId||/^Msxml2\.XMLHTTP/i.test(objId)?new sinon.FakeXMLHttpRequest:new xhr.GlobalActiveXObject(objId)}),sinon.FakeXMLHttpRequest},sinon.FakeXMLHttpRequest=FakeXMLHttpRequest}(this),"object"==typeof module&&"function"==typeof require&&(module.exports=sinon),"undefined"==typeof sinon)var sinon={};if(sinon.fakeServer=function(){function F(){}function create(proto){return F.prototype=proto,new F}function responseArray(handler){var response=handler;if("[object Array]"!=Object.prototype.toString.call(handler)&&(response=[200,{},handler]),"string"!=typeof response[2])throw new TypeError("Fake server response body should be string, but was "+typeof response[2]);return response}function matchOne(response,reqMethod,reqUrl){var rmeth=response.method,matchMethod=!rmeth||rmeth.toLowerCase()==reqMethod.toLowerCase(),url=response.url,matchUrl=!url||url==reqUrl||"function"==typeof url.test&&url.test(reqUrl);return matchMethod&&matchUrl}function match(response,request){this.getHTTPMethod(request);var requestUrl=request.url;if((!/^https?:\/\//.test(requestUrl)||rCurrLoc.test(requestUrl))&&(requestUrl=requestUrl.replace(rCurrLoc,"")),matchOne(response,this.getHTTPMethod(request),requestUrl)){if("function"==typeof response.response){var ru=response.url,args=[request].concat(ru?requestUrl.match(ru).slice(1):[]);return response.response.apply(response,args)}return!0}return!1}function log(response,request){var str;str="Request:\n"+sinon.format(request)+"\n\n",str+="Response:\n"+sinon.format(response)+"\n\n",sinon.log(str)}var push=[].push,wloc="undefined"!=typeof window?window.location:{},rCurrLoc=new RegExp("^"+wloc.protocol+"//"+wloc.host);return{create:function(){var server=create(this);return this.xhr=sinon.useFakeXMLHttpRequest(),server.requests=[],this.xhr.onCreate=function(xhrObj){server.addRequest(xhrObj)},server},addRequest:function(xhrObj){var server=this;push.call(this.requests,xhrObj),xhrObj.onSend=function(){server.handleRequest(this)},this.autoRespond&&!this.responding&&(setTimeout(function(){server.responding=!1,server.respond()},this.autoRespondAfter||10),this.responding=!0)},getHTTPMethod:function(request){if(this.fakeHTTPMethods&&/post/i.test(request.method)){var matches=(request.requestBody||"").match(/_method=([^\b;]+)/);return matches?matches[1]:request.method}return request.method},handleRequest:function(xhr){xhr.async?(this.queue||(this.queue=[]),push.call(this.queue,xhr)):this.processRequest(xhr)},respondWith:function(method,url,body){return 1==arguments.length&&"function"!=typeof method?(this.response=responseArray(method),void 0):(this.responses||(this.responses=[]),1==arguments.length&&(body=method,url=method=null),2==arguments.length&&(body=url,url=method,method=null),push.call(this.responses,{method:method,url:url,response:"function"==typeof body?body:responseArray(body)}),void 0)},respond:function(){arguments.length>0&&this.respondWith.apply(this,arguments);for(var request,queue=this.queue||[];request=queue.shift();)this.processRequest(request)},processRequest:function(request){try{if(request.aborted)return;var response=this.response||[404,{},""];if(this.responses)for(var i=0,l=this.responses.length;l>i;i++)if(match.call(this,this.responses[i],request)){response=this.responses[i].response;break}4!=request.readyState&&(log(response,request),request.respond(response[0],response[1],response[2]))}catch(e){sinon.logError("Fake server request processing",e)}},restore:function(){return this.xhr.restore&&this.xhr.restore.apply(this.xhr,arguments)}}}(),"object"==typeof module&&"function"==typeof require&&(module.exports=sinon),function(){function Server(){}Server.prototype=sinon.fakeServer,sinon.fakeServerWithClock=new Server,sinon.fakeServerWithClock.addRequest=function(xhr){if(xhr.async&&("object"==typeof setTimeout.clock?this.clock=setTimeout.clock:(this.clock=sinon.useFakeTimers(),this.resetClock=!0),!this.longestTimeout)){var clockSetTimeout=this.clock.setTimeout,clockSetInterval=this.clock.setInterval,server=this;this.clock.setTimeout=function(fn,timeout){return server.longestTimeout=Math.max(timeout,server.longestTimeout||0),clockSetTimeout.apply(this,arguments)},this.clock.setInterval=function(fn,timeout){return server.longestTimeout=Math.max(timeout,server.longestTimeout||0),clockSetInterval.apply(this,arguments)}}return sinon.fakeServer.addRequest.call(this,xhr)},sinon.fakeServerWithClock.respond=function(){var returnVal=sinon.fakeServer.respond.apply(this,arguments);return this.clock&&(this.clock.tick(this.longestTimeout||0),this.longestTimeout=0,this.resetClock&&(this.clock.restore(),this.resetClock=!1)),returnVal},sinon.fakeServerWithClock.restore=function(){return this.clock&&this.clock.restore(),sinon.fakeServer.restore.apply(this,arguments)}}(),"object"==typeof module&&"function"==typeof require){var sinon=require("../sinon");sinon.extend(sinon,require("./util/fake_timers"))}return function(){function exposeValue(sandbox,config,key,value){value&&(config.injectInto?config.injectInto[key]=value:push.call(sandbox.args,value))}function prepareSandboxFromConfig(config){var sandbox=sinon.create(sinon.sandbox);return config.useFakeServer&&("object"==typeof config.useFakeServer&&(sandbox.serverPrototype=config.useFakeServer),sandbox.useFakeServer()),config.useFakeTimers&&("object"==typeof config.useFakeTimers?sandbox.useFakeTimers.apply(sandbox,config.useFakeTimers):sandbox.useFakeTimers()),sandbox
}var push=[].push;sinon.sandbox=sinon.extend(sinon.create(sinon.collection),{useFakeTimers:function(){return this.clock=sinon.useFakeTimers.apply(sinon,arguments),this.add(this.clock)},serverPrototype:sinon.fakeServer,useFakeServer:function(){var proto=this.serverPrototype||sinon.fakeServer;return proto&&proto.create?(this.server=proto.create(),this.add(this.server)):null},inject:function(obj){return sinon.collection.inject.call(this,obj),this.clock&&(obj.clock=this.clock),this.server&&(obj.server=this.server,obj.requests=this.server.requests),obj},create:function(config){if(!config)return sinon.create(sinon.sandbox);var sandbox=prepareSandboxFromConfig(config);sandbox.args=sandbox.args||[];var prop,value,exposed=sandbox.inject({});if(config.properties)for(var i=0,l=config.properties.length;l>i;i++)prop=config.properties[i],value=exposed[prop]||"sandbox"==prop&&sandbox,exposeValue(sandbox,config,prop,value);else exposeValue(sandbox,config,"sandbox",value);return sandbox}}),sinon.sandbox.useFakeXMLHttpRequest=sinon.sandbox.useFakeServer,"object"==typeof module&&"function"==typeof require&&(module.exports=sinon.sandbox)}(),function(sinon){function test(callback){var type=typeof callback;if("function"!=type)throw new TypeError("sinon.test needs to wrap a test function, got "+type);return function(){var config=sinon.getConfig(sinon.config);config.injectInto=config.injectIntoThis&&this||config.injectInto;var exception,result,sandbox=sinon.sandbox.create(config),args=Array.prototype.slice.call(arguments).concat(sandbox.args);try{result=callback.apply(this,args)}catch(e){exception=e}if("undefined"!=typeof exception)throw sandbox.restore(),exception;return sandbox.verifyAndRestore(),result}}var commonJSModule="object"==typeof module&&"function"==typeof require;!sinon&&commonJSModule&&(sinon=require("../sinon")),sinon&&(test.config={injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},commonJSModule?module.exports=test:sinon.test=test)}("object"==typeof sinon&&sinon||null),function(sinon){function createTest(property,setUp,tearDown){return function(){setUp&&setUp.apply(this,arguments);var exception,result;try{result=property.apply(this,arguments)}catch(e){exception=e}if(tearDown&&tearDown.apply(this,arguments),exception)throw exception;return result}}function testCase(tests,prefix){if(!tests||"object"!=typeof tests)throw new TypeError("sinon.testCase needs an object with test functions");prefix=prefix||"test";var testName,property,method,rPrefix=new RegExp("^"+prefix),methods={},setUp=tests.setUp,tearDown=tests.tearDown;for(testName in tests)if(tests.hasOwnProperty(testName)){if(property=tests[testName],/^(setUp|tearDown)$/.test(testName))continue;"function"==typeof property&&rPrefix.test(testName)?(method=property,(setUp||tearDown)&&(method=createTest(property,setUp,tearDown)),methods[testName]=sinon.test(method)):methods[testName]=tests[testName]}return methods}var commonJSModule="object"==typeof module&&"function"==typeof require;!sinon&&commonJSModule&&(sinon=require("../sinon")),sinon&&Object.prototype.hasOwnProperty&&(commonJSModule?module.exports=testCase:sinon.testCase=testCase)}("object"==typeof sinon&&sinon||null),function(sinon,global){function verifyIsStub(){for(var method,i=0,l=arguments.length;l>i;++i)method=arguments[i],method||assert.fail("fake is not a spy"),"function"!=typeof method&&assert.fail(method+" is not a function"),"function"!=typeof method.getCall&&assert.fail(method+" is not stubbed")}function failAssertion(object,msg){object=object||global;var failMethod=object.fail||assert.fail;failMethod.call(object,msg)}function mirrorPropAsAssertion(name,method,message){2==arguments.length&&(message=method,method=name),assert[name]=function(fake){verifyIsStub(fake);var args=slice.call(arguments,1),failed=!1;failed="function"==typeof method?!method(fake):"function"==typeof fake[method]?!fake[method].apply(fake,args):!fake[method],failed?failAssertion(this,fake.printf.apply(fake,[message].concat(args))):assert.pass(name)}}function exposedName(prefix,prop){return!prefix||/^fail/.test(prop)?prop:prefix+prop.slice(0,1).toUpperCase()+prop.slice(1)}var assert,commonJSModule="object"==typeof module&&"function"==typeof require,slice=Array.prototype.slice;!sinon&&commonJSModule&&(sinon=require("../sinon")),sinon&&(assert={failException:"AssertError",fail:function(message){var error=new Error(message);throw error.name=this.failException||assert.failException,error},pass:function(){},callOrder:function(){verifyIsStub.apply(null,arguments);var expected="",actual="";if(sinon.calledInOrder(arguments))assert.pass("callOrder");else{try{expected=[].join.call(arguments,", ");for(var calls=slice.call(arguments),i=calls.length;i;)calls[--i].called||calls.splice(i,1);actual=sinon.orderByFirstCall(calls).join(", ")}catch(e){}failAssertion(this,"expected "+expected+" to be "+"called in order but were called as "+actual)}},callCount:function(method,count){if(verifyIsStub(method),method.callCount!=count){var msg="expected %n to be called "+sinon.timesInWords(count)+" but was called %c%C";failAssertion(this,method.printf(msg))}else assert.pass("callCount")},expose:function(target,options){if(!target)throw new TypeError("target is null or undefined");var o=options||{},prefix="undefined"==typeof o.prefix&&"assert"||o.prefix,includeFail="undefined"==typeof o.includeFail||!!o.includeFail;for(var method in this)"export"==method||!includeFail&&/^(fail)/.test(method)||(target[exposedName(prefix,method)]=this[method]);return target}},mirrorPropAsAssertion("called","expected %n to have been called at least once but was never called"),mirrorPropAsAssertion("notCalled",function(spy){return!spy.called},"expected %n to not have been called but was called %c%C"),mirrorPropAsAssertion("calledOnce","expected %n to be called once but was called %c%C"),mirrorPropAsAssertion("calledTwice","expected %n to be called twice but was called %c%C"),mirrorPropAsAssertion("calledThrice","expected %n to be called thrice but was called %c%C"),mirrorPropAsAssertion("calledOn","expected %n to be called with %1 as this but was called with %t"),mirrorPropAsAssertion("alwaysCalledOn","expected %n to always be called with %1 as this but was called with %t"),mirrorPropAsAssertion("calledWithNew","expected %n to be called with new"),mirrorPropAsAssertion("alwaysCalledWithNew","expected %n to always be called with new"),mirrorPropAsAssertion("calledWith","expected %n to be called with arguments %*%C"),mirrorPropAsAssertion("calledWithMatch","expected %n to be called with match %*%C"),mirrorPropAsAssertion("alwaysCalledWith","expected %n to always be called with arguments %*%C"),mirrorPropAsAssertion("alwaysCalledWithMatch","expected %n to always be called with match %*%C"),mirrorPropAsAssertion("calledWithExactly","expected %n to be called with exact arguments %*%C"),mirrorPropAsAssertion("alwaysCalledWithExactly","expected %n to always be called with exact arguments %*%C"),mirrorPropAsAssertion("neverCalledWith","expected %n to never be called with arguments %*%C"),mirrorPropAsAssertion("neverCalledWithMatch","expected %n to never be called with match %*%C"),mirrorPropAsAssertion("threw","%n did not throw exception%C"),mirrorPropAsAssertion("alwaysThrew","%n did not always throw exception%C"),commonJSModule?module.exports=assert:sinon.assert=assert)}("object"==typeof sinon&&sinon||null,"undefined"!=typeof window?window:"undefined"!=typeof self?self:global),sinon}.call("undefined"!=typeof window&&window||{});